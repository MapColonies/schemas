{
  "description": "Worker options for creating a new worker using the jobnik sdk",
  "$id": "https://mapcolonies.com/infra/jobnik/worker/v1",
  "type": "object",
  "title": "Jobnik worker options v1",
  "properties": {
    "concurrency": {
      "description": "The number of concurrent jobs the worker can process",
      "type": "integer",
      "default": 1,
      "minimum": 1,
      "x-env-value": "JOBNIK_WORKER_CONCURRENCY"
    },
    "pullingInterval": {
      "description": "The interval in milliseconds at which the worker polls for new jobs",
      "type": "integer",
      "default": 1000,
      "minimum": 100,
      "x-env-value": "JOBNIK_WORKER_PULLING_INTERVAL"
    },
    "taskHandlerCircuitBreaker": {
      "description": "Circuit breaker configuration for the task handler. e.g. to prevent running tasks when the handler fails repeatedly",
      "$ref": "https://mapcolonies.com/common/circuit-breaker/v1",
      "default": {}
    },
    "dequeueTaskCircuitBreaker": {
      "description": "Circuit breaker configuration for the dequeue task operation. e.g. to prevent dequeuing tasks when the jobnik server is unresponsive",
      "$ref": "https://mapcolonies.com/common/circuit-breaker/v1",
      "default": {}
    }
  }
}
